<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="hu"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Task.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;TimeLogger&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">timelogger</a> &gt; <span class="el_source">Task.java</span></div><h1>Task.java</h1><pre class="source lang-java linenums">package timelogger;

import java.time.Duration;
import java.time.LocalTime;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

/**
 * With the instantiation of this class we can create tasks. We can set a tasks
 * Id, the time of its start, the time of its end, we can add a comment to
 * detail. We can check if a task Id is valid and we can ask for the duration of
 * the task.
 *
 * @author precognox
 */
@Getter
<span class="fc" id="L18">@NoArgsConstructor</span>
public class Task {
    private String taskId;
<span class="fc" id="L21">    @Setter</span>
<span class="fc" id="L22">    private LocalTime startTime;</span>
<span class="fc" id="L23">    @Setter</span>
<span class="fc" id="L24">    private LocalTime endTime;</span>
<span class="fc" id="L25">    @Setter</span>
    private String comment = &quot;&quot;;
    private long minPerTask;

    
    /**
     * @param taskId This is the Id of the task. Redmine project: 4 digits, LT
     * project: LT-(4 digits)
     * @param comment In this parameter you can add some detail about what did
     * you do exactly.
     * @param startTime You can set the time when you started the task:
     * LocalTime.of(hh,mm)
     * @param endTime You can set the time when you finished the task:
     * LocalTime.of(hh,mm)
     * @throws timelogger.InvalidTaskIdException, if the set task Id is not valid
     * @throws timelogger.NoTaskIdException, if there is no task Id set
     */
<span class="fc" id="L42">    public Task(String taskId, String comment, LocalTime startTime, LocalTime endTime) throws InvalidTaskIdException, NoTaskIdException{</span>
        
<span class="fc" id="L44">        this.taskId = taskId;</span>
<span class="fc" id="L45">        this.startTime = startTime;</span>
<span class="fc" id="L46">        this.endTime = endTime;</span>
<span class="fc" id="L47">        this.comment = comment;</span>
<span class="fc bfc" id="L48" title="All 2 branches covered.">        if(!isValidTaskID())</span>
        {
<span class="fc" id="L50">        throw new InvalidTaskIdException(&quot;It is not a valid task Id. Valid id's: 4 digits or LT-4 digits&quot;);</span>
        }
<span class="fc" id="L52">    }</span>

    /**
     * @param taskId The parameter to set
     * @throws InvalidTaskIdException, if the set task Id is not valid
     * @throws NoTaskIdException, if there is no task Id set 
     */
    public void setTaskId(String taskId) throws InvalidTaskIdException, NoTaskIdException {
<span class="fc" id="L60">        this.taskId = taskId;</span>
<span class="pc bpc" id="L61" title="1 of 2 branches missed.">        if(!isValidTaskID())</span>
        {
<span class="nc" id="L63">        throw new InvalidTaskIdException(&quot;It is not a valid task Id. Valid id's: 4 digits or LT-4 digits&quot;);</span>
        }
<span class="fc" id="L65">    }</span>

    
    /**
     * @return with the value of task Id, if it is set
     * @throws NoTaskIdException , if task Id is not set
     */
    public String getTaskId() throws NoTaskIdException {
<span class="pc bpc" id="L73" title="1 of 2 branches missed.">        if (taskId == null) {</span>
<span class="fc" id="L74">            throw new NoTaskIdException(&quot;There is no task Id, please set a valid Id!&quot;);</span>
        } else {
<span class="nc" id="L76">            return taskId;</span>
        }
    }

    /**
     * @return with the value of comment, but if it is not set, 
     * it returns with an empty String
     */
    public String getComment() {
<span class="pc bpc" id="L85" title="1 of 2 branches missed.">        if (comment == null) {</span>
<span class="nc" id="L86">            comment = &quot;&quot;;</span>
        }

<span class="fc" id="L89">        return comment;</span>
    }
    
    /**
     * This method is a getter for the minPerTask field.
     *
     * @return with the time interval between startTime and endTime in minutes
     * @throws timelogger.NotExpectedTimeOrderException, if the task begins after it ends
     * @throws timelogger.EmptyTimeFieldException, if any of the LocalTime  parameter is empty
     */
    public long getMinPerTask() throws NotExpectedTimeOrderException, EmptyTimeFieldException {
<span class="pc bpc" id="L100" title="4 of 8 branches missed.">        if (startTime == null || endTime == null || (startTime == null &amp;&amp; endTime == null)) {</span>
<span class="fc" id="L101">            throw new EmptyTimeFieldException(&quot;You leaved out a time argument, you should set it.&quot;);</span>
<span class="fc bfc" id="L102" title="All 2 branches covered.">        } else if (startTime.isBefore(endTime)) {</span>
<span class="fc" id="L103">            return Duration.between(startTime, endTime).toMinutes();</span>
        } else {
<span class="fc" id="L105">            throw new NotExpectedTimeOrderException(&quot;Something went wrong. You should begin&quot;</span>
                    + &quot; your task before you finish it.&quot;);
        }

    }

    /**
     * This method checks if the Id of the task is a valid redmine task Id.
     *
     * @return true, if it is valid, false if it isn't valid.
     * @throws timelogger.NoTaskIdException, if task Id is not set
     */
    public boolean isValidRedmineTaskId() throws NoTaskIdException {
<span class="fc bfc" id="L118" title="All 2 branches covered.">        if (taskId == null) {</span>
<span class="fc" id="L119">            throw new NoTaskIdException(&quot;There is no task Id, please set a valid Id!&quot;);</span>
        } else {
<span class="fc" id="L121">            return taskId.matches(&quot;\\d{4}&quot;);</span>
        }
    }

    /**
     * This method checks if the Id of the task is a valid LT task Id.
     *
     * @return true, if it is valid, false if it isn't valid.
     * @throws timelogger.NoTaskIdException, if task Id is not set
     */
    public boolean isValidLTTaskId() throws NoTaskIdException {
<span class="fc bfc" id="L132" title="All 2 branches covered.">        if (taskId == null) {</span>
<span class="fc" id="L133">            throw new NoTaskIdException(&quot;There is no task Id, please set a valid Id!&quot;);</span>
        } else {
<span class="fc" id="L135">            return taskId.matches(&quot;LT-\\d{4}&quot;);</span>
        }
    }

    /**
     * This method checks if the Id of the task is a valid task Id (redmine or
     * LT project task id).
     *
     * @return true, if it is valid, false if it isn't valid.
     * @throws timelogger.NoTaskIdException, if task Id is not set
     */
    protected boolean isValidTaskID() throws NoTaskIdException {

<span class="fc bfc" id="L148" title="All 4 branches covered.">        return isValidLTTaskId() || isValidRedmineTaskId();</span>
    }

    /**
     * This method checks if the minutes are the multiple of quarter hour
     *
     * @return true, if it is multiple, but false if it isn't.
     * @throws timelogger.NotExpectedTimeOrderException, if the task begins after it ends
     * @throws timelogger.EmptyTimeFieldException, if any of the LocalTime  parameter is empty
     */
    public boolean isMultipleQuarterHour() throws NotExpectedTimeOrderException, EmptyTimeFieldException {
<span class="fc bfc" id="L159" title="All 2 branches covered.">        return getMinPerTask() % 15 == 0;</span>

    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>